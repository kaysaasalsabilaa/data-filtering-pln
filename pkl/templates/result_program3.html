<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hasil Filter Data ROM</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script>
        function filterData() {
            // Loop through table rows dan sembunyikan yang tidak dicentang
            let table = document.getElementById("dataTable");
            let rows = table.getElementsByTagName("tr");

            for (let i = 1; i < rows.length; i++) {  // Lewati baris header
                let checkbox = rows[i].querySelector("input[type='checkbox']");
                if (checkbox && !checkbox.checked) {
                    rows[i].style.display = "none";  // Sembunyikan baris yang tidak dipilih
                }
            }
        }

        function resetFilter() {
            // Tampilkan kembali semua baris
            let table = document.getElementById("dataTable");
            let rows = table.getElementsByTagName("tr");

            for (let i = 1; i < rows.length; i++) {
                rows[i].style.display = "";  // Tampilkan semua baris
            }
        }
    </script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Hasil Filter Data ROM</h1>

        <!-- Debugging: Tampilkan jumlah data yang diterima -->
        <p>Jumlah Data yang Diterima: <span id="dataCount">{{ data|length }}</span></p>

        <table class="table table-bordered mt-3" id="dataTable">
            <thead>
                <tr>
                    <th>Terjaring ROM</th>  <!-- Kolom Checkbox Baru -->
                    <th>Data Rekap</th>
                    <th>Lokasi</th>
                    <th>Peralatan</th>
                    <th>Waktu Awal</th>
                    <th>Waktu Akhir</th>
                    <th>Keterangan</th>
                </tr>
            </thead>
            <tbody>
                {% for item in data %}
                <tr>
                    <td class="text-center">
                        <input type="checkbox">
                    </td>
                    <td>{{ item.rekap }}</td>
                    <td>{{ item.location }}</td>
                    <td>{{ item.equipment }}</td>
                    <td>{{ item.start_date }}</td>
                    <td>{{ item.end_date }}</td>
                    <td>{{ item.keterangan }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Tombol Filter dan Reset -->
        <div class="mt-3">
            <button class="btn btn-primary" onclick="filterData()">Filter</button>
            <button class="btn btn-secondary" onclick="resetFilter()">Reset</button>
        </div>

        <!-- Bagian Catatan Perubahan -->
        <div class="alert alert-info mt-4">
            <strong>Catatan:</strong>
            <ul>
                <li>Data yang mengandung <strong>IBT</strong> telah diubah menjadi <strong>TRAF/TRF</strong>.</li>
                <li>Data dengan format <strong>150/70kV</strong> telah diubah menjadi <strong>150 / 70kV</strong>.</li>
            </ul>
        </div>
    </div>
</body>
</html>
